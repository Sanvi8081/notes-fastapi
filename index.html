<!DOCTYPE html>
<html>
<head>
    <title>Notes App</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

    <h1>üìù Notes App (FastAPI)</h1>

    <form id="noteForm">
        <input type="text" id="title" placeholder="Enter title" required>
        <textarea id="content" placeholder="Enter content" required></textarea>
        <button type="submit">Add Note</button>
    </form>

    <h2>All Notes</h2>
    <div id="notesList"></div>

    <script>
        async function fetchNotes() {
            const res = await fetch('/notes');
            const data = await res.json();
            const notesDiv = document.getElementById('notesList');
            notesDiv.innerHTML = '';

            data.notes.forEach((note, index) => {
                notesDiv.innerHTML += `
                    <div class="note">
                        <h3>${note.title}</h3>
                        <p>${note.content}</p>
                        <button onclick="deleteNote(${index})">Delete</button>
                    </div>
                `;
            });
        }

        document.getElementById('noteForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;

            await fetch('/notes', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ title, content })
            });

            fetchNotes();
        });

        async function deleteNote(id) {
            await fetch(`/notes/${id}`, { method: 'DELETE' });
            fetchNotes();
        }

        fetchNotes();
    </script>

</body>
</html>
